{
  "updatedAt": "2026-02-16T17:00:32.239Z",
  "createdAt": "2026-02-05T15:40:02.769Z",
  "id": "l0p4y5gFr4cklXjY",
  "name": "generate clips",
  "description": null,
  "active": true,
  "isArchived": false,
  "nodes": [
    {
      "parameters": {
        "inputSource": "jsonExample",
        "jsonExample": "{\n  \"channelsFolderPath\": \"\",\n  \"channelName\": \"\",\n  \"videoFolderName\": \"\"\n}"
      },
      "id": "c055762a-8fe7-4141-a639-df2372f30060",
      "typeVersion": 1.1,
      "name": "Start",
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "position": [
        272,
        352
      ]
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "qwG1pltFOQqqJLyh",
          "mode": "list",
          "cachedResultUrl": "/workflow/qwG1pltFOQqqJLyh",
          "cachedResultName": "JSON File Works"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "filePath": "={{ $('Start').first().json.channelsFolderPath }}/{{ $('Start').first().json.channelName }}/settings.json",
            "fileAction": "read",
            "keysToReturn": "={{ [\"clipGenType\", \"clipGenerationService\"] }}",
            "keysToWrite": "={{ {} }}",
            "keysToDelete": "={{ [] }}"
          },
          "matchingColumns": [
            "channelsFolderPath_firstItem",
            "channelName_firstItem"
          ],
          "schema": [
            {
              "id": "filePath",
              "displayName": "filePath",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "fileAction",
              "displayName": "fileAction",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "keysToReturn",
              "displayName": "keysToReturn",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "array",
              "removed": false
            },
            {
              "id": "keysToWrite",
              "displayName": "keysToWrite",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "object",
              "removed": false
            },
            {
              "id": "keysToDelete",
              "displayName": "keysToDelete",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "array",
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.2,
      "position": [
        496,
        352
      ],
      "name": "get clips gen type",
      "id": "3d4f57e2-36d7-4e76-afd0-586941cfe5f5"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.clipGenType == \"texttovideo\" }}",
                    "rightValue": "",
                    "operator": {
                      "type": "boolean",
                      "operation": "true",
                      "singleValue": true
                    },
                    "id": "7d4bb780-be1f-4409-ab87-811c6e2250c4"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "texttovideo"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "3bbf1f67-7275-45fd-9a76-17e2651c5446",
                    "leftValue": "={{ $json.clipGenType == \"imagetovideo\" }}",
                    "rightValue": "",
                    "operator": {
                      "type": "boolean",
                      "operation": "true",
                      "singleValue": true
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "imagetovideo"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        704,
        352
      ],
      "id": "efff64eb-b740-4788-83df-0128d734dfd4",
      "name": "Switch Clips Gen Type"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('get clips gen type').item.json.clipGenerationService == \"runpod\"}}",
                    "rightValue": "",
                    "operator": {
                      "type": "boolean",
                      "operation": "true",
                      "singleValue": true
                    },
                    "id": "d25563f6-7676-4251-a586-369e886540f5"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "runpod"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        912,
        224
      ],
      "id": "2b1cf95d-7ffd-4e37-a976-5b60d7e61ea1",
      "name": "Switch by clipGenerationService"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "o5B3Nkoco1rF2d1h",
          "mode": "list",
          "cachedResultUrl": "/workflow/o5B3Nkoco1rF2d1h",
          "cachedResultName": "runpod works"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "channelsFolderPath": "={{ $('Start').first().json.channelsFolderPath }}",
            "channelName": "={{ $('Start').first().json.channelName }}",
            "videoFolderName": "={{ $('Start').first().json.videoFolderName }}",
            "method": "deployPod",
            "runpodUseVolume": "={{ $json.ranpodUseVolume }}",
            "runpodTemplateId": "={{ $json.runpodVideoGenTemplateId }}",
            "runpodVolumeId": "={{ $json.runpodVolumeId }}",
            "runpodGpuList": "={{ $json.runpodGPUList }}",
            "runpodCountryCodes": "={{ $json.runpodCountryCodes }}",
            "runpodContainerDiskInGb": "={{ $json.runpodContainerDiskInGb }}",
            "runpodVolumeInGb": "={{ $json.runpodVolumeInGb }}",
            "comfyUiRequest": "={{ {} }}",
            "index": 0
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "channelsFolderPath",
              "displayName": "channelsFolderPath",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "channelName",
              "displayName": "channelName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "videoFolderName",
              "displayName": "videoFolderName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "index",
              "displayName": "index",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "number",
              "removed": false
            },
            {
              "id": "method",
              "displayName": "method",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "comfyUiRequest",
              "displayName": "comfyUiRequest",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "object",
              "removed": false
            },
            {
              "id": "runpodTemplateId",
              "displayName": "runpodTemplateId",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "runpodUseVolume",
              "displayName": "runpodUseVolume",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "boolean",
              "removed": false
            },
            {
              "id": "runpodVolumeId",
              "displayName": "runpodVolumeId",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "runpodContainerDiskInGb",
              "displayName": "runpodContainerDiskInGb",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "number",
              "removed": false
            },
            {
              "id": "runpodVolumeInGb",
              "displayName": "runpodVolumeInGb",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "number",
              "removed": false
            },
            {
              "id": "runpodGpuList",
              "displayName": "runpodGpuList",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "array",
              "removed": false
            },
            {
              "id": "runpodCountryCodes",
              "displayName": "runpodCountryCodes",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "array",
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {
          "waitForSubWorkflow": true
        }
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        1360,
        224
      ],
      "id": "5c809818-992c-436a-8b6b-92799468b5a7",
      "name": "start runpod"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "qwG1pltFOQqqJLyh",
          "mode": "list",
          "cachedResultUrl": "/workflow/qwG1pltFOQqqJLyh",
          "cachedResultName": "JSON File Works"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "filePath": "={{ $('Start').first().json.channelsFolderPath }}/{{ $('Start').first().json.channelName }}/settings.json",
            "fileAction": "read",
            "keysToReturn": "={{ [\"runpodVideoGenTemplateId\", \"ranpodUseVolume\", \"runpodVolumeId\", \"runpodContainerDiskInGb\", \"runpodVolumeInGb\", \"runpodGPUList\", \"runpodCountryCodes\"] }}",
            "keysToWrite": "={{ {} }}",
            "keysToDelete": "={{ [] }}"
          },
          "matchingColumns": [
            "channelsFolderPath_firstItem",
            "channelName_firstItem"
          ],
          "schema": [
            {
              "id": "filePath",
              "displayName": "filePath",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "fileAction",
              "displayName": "fileAction",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "keysToReturn",
              "displayName": "keysToReturn",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "array",
              "removed": false
            },
            {
              "id": "keysToWrite",
              "displayName": "keysToWrite",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "object",
              "removed": false
            },
            {
              "id": "keysToDelete",
              "displayName": "keysToDelete",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "array",
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.2,
      "position": [
        1136,
        224
      ],
      "name": "get pod parameters",
      "id": "35936155-c11e-402f-adad-d1d85b06eb69"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('start runpod').last().json.podStatus == \"ready\" }}",
                    "rightValue": "",
                    "operator": {
                      "type": "boolean",
                      "operation": "true",
                      "singleValue": true
                    },
                    "id": "97e59f12-bc59-4be5-90ae-b8377c299af1"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "ready"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        1568,
        224
      ],
      "id": "11b69377-436b-4c91-a110-20f9373f3bac",
      "name": "if pod ready"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('get pod parameters').first().json.runpodVideoGenTemplateId == \"edk2i1wn89\" }}",
                    "rightValue": "",
                    "operator": {
                      "type": "boolean",
                      "operation": "true",
                      "singleValue": true
                    },
                    "id": "f07341c6-def4-4873-a3e8-308976dfd7e7"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "ltx-2 template"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        3328,
        224
      ],
      "id": "6ef894e1-c07d-482c-8e18-73a78e346bc3",
      "name": "Switch by Template Id"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "e6b3b819-3506-459d-8480-eba77e5b062f",
              "name": "request",
              "value": "={\n\"client_id\": \"x\",\n\"prompt\":{\n    \"75\": {\n      \"inputs\": {\n        \"filename_prefix\": \"video/LTX-2\",\n        \"format\": \"mp4\",\n        \"codec\": \"auto\",\n        \"video\": [\n          \"121\",\n          0\n        ]\n      },\n      \"class_type\": \"SaveVideo\",\n      \"_meta\": {\n        \"title\": \"Save Video\"\n      }\n    },\n    \"98\": {\n      \"inputs\": {\n        \"steps\": 20,\n        \"max_shift\": 2.05,\n        \"base_shift\": 0.95,\n        \"stretch\": true,\n        \"terminal\": 0.1,\n        \"latent\": [\n          \"108\",\n          0\n        ]\n      },\n      \"class_type\": \"LTXVScheduler\",\n      \"_meta\": {\n        \"title\": \"LTXVScheduler\"\n      }\n    },\n    \"99\": {\n      \"inputs\": {\n        \"sigmas\": \"0.909375, 0.725, 0.421875, 0.0\"\n      },\n      \"class_type\": \"ManualSigmas\",\n      \"_meta\": {\n        \"title\": \"ManualSigmas\"\n      }\n    },\n    \"100\": {\n      \"inputs\": {\n        \"model_name\": \"ltx-2-spatial-upscaler-x2-1.0.safetensors\"\n      },\n      \"class_type\": \"LatentUpscaleModelLoader\",\n      \"_meta\": {\n        \"title\": \"Load Latent Upscale Model\"\n      }\n    },\n    \"101\": {\n      \"inputs\": {\n        \"positive\": [\n          \"106\",\n          0\n        ],\n        \"negative\": [\n          \"106\",\n          1\n        ],\n        \"latent\": [\n          \"115\",\n          0\n        ]\n      },\n      \"class_type\": \"LTXVCropGuides\",\n      \"_meta\": {\n        \"title\": \"LTXVCropGuides\"\n      }\n    },\n    \"102\": {\n      \"inputs\": {\n        \"cfg\": 1,\n        \"model\": [\n          \"132\",\n          0\n        ],\n        \"positive\": [\n          \"101\",\n          0\n        ],\n        \"negative\": [\n          \"101\",\n          1\n        ]\n      },\n      \"class_type\": \"CFGGuider\",\n      \"_meta\": {\n        \"title\": \"CFGGuider\"\n      }\n    },\n    \"103\": {\n      \"inputs\": {\n        \"upscale_method\": \"lanczos\",\n        \"scale_by\": 0.5,\n        \"image\": [\n          \"110\",\n          0\n        ]\n      },\n      \"class_type\": \"ImageScaleBy\",\n      \"_meta\": {\n        \"title\": \"Upscale Image By\"\n      }\n    },\n    \"104\": {\n      \"inputs\": {\n        \"image\": [\n          \"103\",\n          0\n        ]\n      },\n      \"class_type\": \"GetImageSize\",\n      \"_meta\": {\n        \"title\": \"Get Image Size\"\n      }\n    },\n    \"105\": {\n      \"inputs\": {\n        \"frames_number\": [\n          \"111\",\n          0\n        ],\n        \"frame_rate\": [\n          \"129\",\n          0\n        ],\n        \"batch_size\": 1,\n        \"audio_vae\": [\n          \"122\",\n          0\n        ]\n      },\n      \"class_type\": \"LTXVEmptyLatentAudio\",\n      \"_meta\": {\n        \"title\": \"LTXV Empty Latent Audio\"\n      }\n    },\n    \"106\": {\n      \"inputs\": {\n        \"frame_rate\": [\n          \"128\",\n          0\n        ],\n        \"positive\": [\n          \"120\",\n          0\n        ],\n        \"negative\": [\n          \"109\",\n          0\n        ]\n      },\n      \"class_type\": \"LTXVConditioning\",\n      \"_meta\": {\n        \"title\": \"LTXVConditioning\"\n      }\n    },\n    \"107\": {\n      \"inputs\": {\n        \"width\": [\n          \"104\",\n          0\n        ],\n        \"height\": [\n          \"104\",\n          1\n        ],\n        \"length\": [\n          \"111\",\n          0\n        ],\n        \"batch_size\": 1\n      },\n      \"class_type\": \"EmptyLTXVLatentVideo\",\n      \"_meta\": {\n        \"title\": \"EmptyLTXVLatentVideo\"\n      }\n    },\n    \"108\": {\n      \"inputs\": {\n        \"video_latent\": [\n          \"107\",\n          0\n        ],\n        \"audio_latent\": [\n          \"105\",\n          0\n        ]\n      },\n      \"class_type\": \"LTXVConcatAVLatent\",\n      \"_meta\": {\n        \"title\": \"LTXVConcatAVLatent\"\n      }\n    },\n    \"109\": {\n      \"inputs\": {\n        \"text\": \"{{ $json.negativePrompt }}\",\n        \"clip\": [\n          \"139\",\n          0\n        ]\n      },\n      \"class_type\": \"CLIPTextEncode\",\n      \"_meta\": {\n        \"title\": \"clip_negative_prompt\"\n      }\n    },\n    \"110\": {\n      \"inputs\": {\n        \"width\": {{ $json.clipWidth }},\n        \"height\": {{ $json.clipHeight }},\n        \"batch_size\": 1,\n        \"color\": 0\n      },\n      \"class_type\": \"EmptyImage\",\n      \"_meta\": {\n        \"title\": \"clip_frame_size\"\n      }\n    },\n    \"111\": {\n      \"inputs\": {\n        \"value\": {{ $json.clipFramesCount.toNumber()+$('get text gen service and eachVisualScreenTime').first().json.clipAdditionalSafeFrames }}\n      },\n      \"class_type\": \"PrimitiveInt\",\n      \"_meta\": {\n        \"title\": \"clip_frame_count\"\n      }\n    },\n    \"112\": {\n      \"inputs\": {\n        \"noise\": [\n          \"114\",\n          0\n        ],\n        \"guider\": [\n          \"127\",\n          0\n        ],\n        \"sampler\": [\n          \"135\",\n          0\n        ],\n        \"sigmas\": [\n          \"98\",\n          0\n        ],\n        \"latent_image\": [\n          \"108\",\n          0\n        ]\n      },\n      \"class_type\": \"SamplerCustomAdvanced\",\n      \"_meta\": {\n        \"title\": \"SamplerCustomAdvanced\"\n      }\n    },\n    \"113\": {\n      \"inputs\": {\n        \"noise_seed\": 0\n      },\n      \"class_type\": \"RandomNoise\",\n      \"_meta\": {\n        \"title\": \"RandomNoise\"\n      }\n    },\n    \"114\": {\n      \"inputs\": {\n        \"noise_seed\": {{ (()=>{\nif (false){\n  return Math.random().toString().slice(2)\n}\nelse return 1\n})() }}\n      },\n      \"class_type\": \"RandomNoise\",\n      \"_meta\": {\n        \"title\": \"RandomNoise\"\n      }\n    },\n    \"115\": {\n      \"inputs\": {\n        \"av_latent\": [\n          \"112\",\n          0\n        ]\n      },\n      \"class_type\": \"LTXVSeparateAVLatent\",\n      \"_meta\": {\n        \"title\": \"LTXVSeparateAVLatent\"\n      }\n    },\n    \"116\": {\n      \"inputs\": {\n        \"video_latent\": [\n          \"117\",\n          0\n        ],\n        \"audio_latent\": [\n          \"115\",\n          1\n        ]\n      },\n      \"class_type\": \"LTXVConcatAVLatent\",\n      \"_meta\": {\n        \"title\": \"LTXVConcatAVLatent\"\n      }\n    },\n    \"117\": {\n      \"inputs\": {\n        \"samples\": [\n          \"101\",\n          2\n        ],\n        \"upscale_model\": [\n          \"100\",\n          0\n        ],\n        \"vae\": [\n          \"131\",\n          2\n        ]\n      },\n      \"class_type\": \"LTXVLatentUpsampler\",\n      \"_meta\": {\n        \"title\": \"spatial\"\n      }\n    },\n    \"118\": {\n      \"inputs\": {\n        \"noise\": [\n          \"113\",\n          0\n        ],\n        \"guider\": [\n          \"102\",\n          0\n        ],\n        \"sampler\": [\n          \"136\",\n          0\n        ],\n        \"sigmas\": [\n          \"99\",\n          0\n        ],\n        \"latent_image\": [\n          \"116\",\n          0\n        ]\n      },\n      \"class_type\": \"SamplerCustomAdvanced\",\n      \"_meta\": {\n        \"title\": \"SamplerCustomAdvanced\"\n      }\n    },\n    \"120\": {\n      \"inputs\": {\n        \"text\": \"{{ $json.positivePrompt }}\",\n        \"clip\": [\n          \"139\",\n          0\n        ]\n      },\n      \"class_type\": \"CLIPTextEncode\",\n      \"_meta\": {\n        \"title\": \"clip_positive_prompt\"\n      }\n    },\n    \"121\": {\n      \"inputs\": {\n        \"fps\": [\n          \"128\",\n          0\n        ],\n        \"images\": [\n          \"125\",\n          0\n        ],\n        \"audio\": [\n          \"126\",\n          0\n        ]\n      },\n      \"class_type\": \"CreateVideo\",\n      \"_meta\": {\n        \"title\": \"Create Video\"\n      }\n    },\n    \"122\": {\n      \"inputs\": {\n        \"ckpt_name\": \"ltx-2-19b-dev.safetensors\"\n      },\n      \"class_type\": \"LTXVAudioVAELoader\",\n      \"_meta\": {\n        \"title\": \"LTXV Audio VAE Loader\"\n      }\n    },\n    \"123\": {\n      \"inputs\": {\n        \"av_latent\": [\n          \"118\",\n          1\n        ]\n      },\n      \"class_type\": \"LTXVSeparateAVLatent\",\n      \"_meta\": {\n        \"title\": \"LTXVSeparateAVLatent\"\n      }\n    },\n    \"125\": {\n      \"inputs\": {\n        \"tile_size\": 512,\n        \"overlap\": 64,\n        \"temporal_size\": 4096,\n        \"temporal_overlap\": 8,\n        \"samples\": [\n          \"123\",\n          0\n        ],\n        \"vae\": [\n          \"131\",\n          2\n        ]\n      },\n      \"class_type\": \"VAEDecodeTiled\",\n      \"_meta\": {\n        \"title\": \"VAE Decode (Tiled)\"\n      }\n    },\n    \"126\": {\n      \"inputs\": {\n        \"samples\": [\n          \"123\",\n          1\n        ],\n        \"audio_vae\": [\n          \"122\",\n          0\n        ]\n      },\n      \"class_type\": \"LTXVAudioVAEDecode\",\n      \"_meta\": {\n        \"title\": \"LTXV Audio VAE Decode\"\n      }\n    },\n    \"127\": {\n      \"inputs\": {\n        \"cfg\": 4,\n        \"model\": [\n          \"131\",\n          0\n        ],\n        \"positive\": [\n          \"106\",\n          0\n        ],\n        \"negative\": [\n          \"106\",\n          1\n        ]\n      },\n      \"class_type\": \"CFGGuider\",\n      \"_meta\": {\n        \"title\": \"CFGGuider\"\n      }\n    },\n    \"128\": {\n      \"inputs\": {\n        \"value\": {{ $json.clipFps }}\n      },\n      \"class_type\": \"PrimitiveFloat\",\n      \"_meta\": {\n        \"title\": \"clip_frame_rate_float\"\n      }\n    },\n    \"129\": {\n      \"inputs\": {\n        \"value\": {{ $json.clipFps }}\n      },\n      \"class_type\": \"PrimitiveInt\",\n      \"_meta\": {\n        \"title\": \"clip_frame_rate_int\"\n      }\n    },\n    \"131\": {\n      \"inputs\": {\n        \"ckpt_name\": \"ltx-2-19b-dev.safetensors\"\n      },\n      \"class_type\": \"CheckpointLoaderSimple\",\n      \"_meta\": {\n        \"title\": \"Load Checkpoint\"\n      }\n    },\n    \"132\": {\n      \"inputs\": {\n        \"lora_name\": \"ltx-2-19b-distilled-lora-384.safetensors\",\n        \"strength_model\": 1,\n        \"model\": [\n          \"131\",\n          0\n        ]\n      },\n      \"class_type\": \"LoraLoaderModelOnly\",\n      \"_meta\": {\n        \"title\": \"Load LoRA\"\n      }\n    },\n    \"135\": {\n      \"inputs\": {\n        \"sampler_name\": \"euler_ancestral\"\n      },\n      \"class_type\": \"KSamplerSelect\",\n      \"_meta\": {\n        \"title\": \"KSamplerSelect\"\n      }\n    },\n    \"136\": {\n      \"inputs\": {\n        \"sampler_name\": \"euler_ancestral\"\n      },\n      \"class_type\": \"KSamplerSelect\",\n      \"_meta\": {\n        \"title\": \"KSamplerSelect\"\n      }\n    },\n    \"139\": {\n      \"inputs\": {\n        \"text_encoder\": \"gemma_3_12B_it.safetensors\",\n        \"ckpt_name\": \"ltx-2-19b-dev.safetensors\",\n        \"device\": \"default\"\n      },\n      \"class_type\": \"LTXAVTextEncoderLoader\",\n      \"_meta\": {\n        \"title\": \"LTXV Audio Text Encoder Loader\"\n      }\n    }\n  }\n}",
              "type": "object"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        3760,
        224
      ],
      "id": "0e77a79e-d263-4e2d-b085-d17deffb542c",
      "name": "form edk2i1wn89 request"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "qwG1pltFOQqqJLyh",
          "mode": "list",
          "cachedResultUrl": "/workflow/qwG1pltFOQqqJLyh",
          "cachedResultName": "JSON File Works"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "filePath": "={{ $('Start').first().json.channelsFolderPath }}/{{ $('Start').first().json.channelName }}/settings.json",
            "fileAction": "read",
            "keysToReturn": "={{ [\"textGenService\", \"eachVisualMinScreenTimeMs\", \"eachVisualMaxScreenTimeMs\", \"clipAdditionalSafeFrames\"] }}",
            "keysToWrite": "={{ {} }}",
            "keysToDelete": "={{ [] }}"
          },
          "matchingColumns": [
            "channelsFolderPath_firstItem",
            "channelName_firstItem"
          ],
          "schema": [
            {
              "id": "filePath",
              "displayName": "filePath",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "fileAction",
              "displayName": "fileAction",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "keysToReturn",
              "displayName": "keysToReturn",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "array",
              "removed": false
            },
            {
              "id": "keysToWrite",
              "displayName": "keysToWrite",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "object",
              "removed": false
            },
            {
              "id": "keysToDelete",
              "displayName": "keysToDelete",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "array",
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.2,
      "position": [
        2112,
        224
      ],
      "name": "get text gen service and eachVisualScreenTime",
      "id": "6a764908-25e1-43f5-8551-af1fecdbf9e6"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "qwG1pltFOQqqJLyh",
          "mode": "list",
          "cachedResultUrl": "/workflow/qwG1pltFOQqqJLyh",
          "cachedResultName": "JSON File Works"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "filePath": "={{ $('Start').first().json.channelsFolderPath }}/{{ $('Start').first().json.channelName }}/VIDEOS/{{ $('Start').first().json.videoFolderName }}/VOICE/transcript/{{ $('Start').first().json.videoFolderName }}_transcript.json",
            "fileAction": "read",
            "keysToReturn": "={{ [\"items[n].text\",\"items[n].start_ms\",\"items[n].end_ms\"] }}",
            "keysToWrite": "={{ {} }}",
            "keysToDelete": "={{ [] }}"
          },
          "matchingColumns": [
            "channelsFolderPath_firstItem",
            "channelName_firstItem"
          ],
          "schema": [
            {
              "id": "filePath",
              "displayName": "filePath",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "fileAction",
              "displayName": "fileAction",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "keysToReturn",
              "displayName": "keysToReturn",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "array",
              "removed": false
            },
            {
              "id": "keysToWrite",
              "displayName": "keysToWrite",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "object",
              "removed": false
            },
            {
              "id": "keysToDelete",
              "displayName": "keysToDelete",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "array",
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.2,
      "position": [
        2304,
        224
      ],
      "name": "get start/end ms of each scentance from transcript",
      "id": "c35b591f-fed5-4666-b1ac-a65d12e2cb01"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "qwG1pltFOQqqJLyh",
          "mode": "list",
          "cachedResultUrl": "/workflow/qwG1pltFOQqqJLyh",
          "cachedResultName": "JSON File Works"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "filePath": "={{ $('Start').first().json.channelsFolderPath }}/{{ $('Start').first().json.channelName }}/settings.json",
            "fileAction": "read",
            "keysToReturn": "={{ [\"clipFps\", \"clipWidth\", \"clipHeight\"] }}",
            "keysToWrite": "={{ {} }}",
            "keysToDelete": "={{ [] }}"
          },
          "matchingColumns": [
            "channelsFolderPath_firstItem",
            "channelName_firstItem"
          ],
          "schema": [
            {
              "id": "filePath",
              "displayName": "filePath",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "fileAction",
              "displayName": "fileAction",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "keysToReturn",
              "displayName": "keysToReturn",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "array",
              "removed": false
            },
            {
              "id": "keysToWrite",
              "displayName": "keysToWrite",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "object",
              "removed": false
            },
            {
              "id": "keysToDelete",
              "displayName": "keysToDelete",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "array",
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.2,
      "position": [
        1920,
        224
      ],
      "name": "get clip gen params",
      "id": "203bcbfe-49eb-46c5-84ef-c032b63e30c8"
    },
    {
      "parameters": {
        "jsCode": "// ===============================\n// âœ… INPUT VARIABLES (Ñ‡Ñ‚Ð¾ Ð¿Ð¾Ð´Ð°Ñ‚ÑŒ Ð½Ð° Ð²Ñ…Ð¾Ð´)\n// ===============================\n\n// 1) Ð¡Ð•Ð“ÐœÐ•ÐÐ¢Ð« Ð¢Ð ÐÐÐ¡ÐšÐ Ð˜ÐŸÐ¢Ð (Ð¼Ð°ÑÑÐ¸Ð² Ð¾Ð±ÑŠÐµÐºÑ‚Ð¾Ð²)\nconst RAW_SEGMENTS = $('get start/end ms of each scentance from transcript').first().json.items;\n\n// 2) MIN / MAX ÑÐºÑ€Ð°Ð½Ð½Ð¾Ð³Ð¾ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸ (Ð¼Ð¸Ð»Ð»Ð¸ÑÐµÐºÑƒÐ½Ð´Ñ‹)\nconst EACH_IMAGE_MIN_SCREEN_TIME_MS = $('get text gen service and eachVisualScreenTime').first().json.eachVisualMinScreenTimeMs;\nconst EACH_IMAGE_MAX_SCREEN_TIME_MS = $('get text gen service and eachVisualScreenTime').first().json.eachVisualMaxScreenTimeMs;\n\n// 3) â€œÐœÑÐ³ÐºÐ¸Ð¹ Ð¿ÐµÑ€ÐµÐ»Ñ‘Ñ‚â€ â€” Ð—ÐÐŸÐ Ð•Ð©Ð•Ð (ÑÑ‚Ñ€Ð¾Ð³Ð¾ Ð½Ðµ Ð²Ñ‹Ñ…Ð¾Ð´Ð¸Ð¼ Ð·Ð° max)\nconst SOFT_OVERFLOW_MS = 0;\n\n// 4) ÐšÐ°ÐºÐ¸Ðµ ÐºÐ»ÑŽÑ‡Ð¸ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ Ð² RAW_SEGMENTS\nconst TEXT_KEY   = 'text';\nconst START_KEYS = ['start_ms', 'start'];\nconst END_KEYS   = ['end_ms', 'end'];\n\n// 5) Ð•Ð´Ð¸Ð½Ð¸Ñ†Ñ‹ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸\nconst TIME_UNIT = 'auto'; // 'auto' | 'ms' | 's'\n\n// 6) ÐžÐ±Ñ‰Ð°Ñ Ð´Ð»Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ Ñ‚Ñ€ÐµÐºÐ° (Ð² Ð¼Ñ). Ð•ÑÐ»Ð¸ Ð½Ðµ Ð½Ð°Ð¹Ð´Ñ‘Ð¼ â€” Ð²Ð¾Ð·ÑŒÐ¼Ñ‘Ð¼ max(end_ms) Ð¿Ð¾ÑÐ»Ðµ Ð½Ð¾Ñ€Ð¼Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸.\nconst TOTAL_DUR_MS = (() => {\n  try {\n    const j = $('get start/end ms of each scentance from transcript').first().json;\n\n    const candidates = [\n      j.total_dur_ms,\n      j.totalDurMs,\n      j.total_duration_ms,\n      (Number(j.total_duration_sec) * 1000),\n      (Number(j.meta?.progress?.total_duration_sec) * 1000),\n      (Number(j.meta?.total_duration_sec) * 1000),\n    ];\n\n    for (const c of candidates) {\n      const n = Number(c);\n      if (Number.isFinite(n) && n > 0) return Math.round(n);\n    }\n  } catch (_) {}\n\n  return null;\n})();\n\n\n// ===============================\n// ðŸ”§ Implementation\n// ===============================\n\nfunction cleanText(s) {\n  return String(s ?? \"\")\n    .replace(/\\r?\\n/g, \" \")\n    .replace(/\\s+/g, \" \")\n    .trim();\n}\n\nfunction pickFirst(obj, keys) {\n  for (const k of keys) {\n    if (obj && obj[k] != null) return obj[k];\n  }\n  return null;\n}\n\nfunction toNumber(x) {\n  const n = typeof x === \"number\" ? x : parseFloat(String(x));\n  return Number.isFinite(n) ? n : null;\n}\n\n// ÐÐ¾Ñ€Ð¼Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ start/end Ð² ÐœÐ¡ (Ð° Ð½Ðµ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ durMs)\nfunction normalizeStartEndMs(rawSeg) {\n  // 1) start_ms/end_ms -> ÑÑ‡Ð¸Ñ‚Ð°ÐµÐ¼ Ñ‡Ñ‚Ð¾ ÑÑ‚Ð¾ ms\n  const sMs = toNumber(rawSeg?.start_ms);\n  const eMs = toNumber(rawSeg?.end_ms);\n  if (sMs != null && eMs != null) {\n    const start = Math.max(0, Math.round(sMs));\n    const end = Math.max(start, Math.round(eMs));\n    return { startMs: start, endMs: end };\n  }\n\n  // 2) start/end -> auto/ms/s\n  const s = toNumber(rawSeg?.start);\n  const e = toNumber(rawSeg?.end);\n  if (s == null || e == null) return { startMs: 0, endMs: 0 };\n\n  let factor = 1;\n  if (TIME_UNIT === 's') factor = 1000;\n  else if (TIME_UNIT === 'ms') factor = 1;\n  else {\n    const diff = e - s;\n    const looksLikeSeconds = diff > 0 && diff <= 120 && e <= 20000;\n    factor = looksLikeSeconds ? 1000 : 1;\n  }\n\n  const start = Math.max(0, Math.round(s * factor));\n  const end = Math.max(start, Math.round(e * factor));\n  return { startMs: start, endMs: end };\n}\n\n// ===============================\n// âœ… GAP FILL LOGIC\n// ===============================\nfunction fillGapsInPlace(segs, totalDurMs) {\n  if (!Array.isArray(segs) || segs.length === 0) return { totalDurMs: totalDurMs ?? 0 };\n\n  segs.sort((a, b) => (a.startMs - b.startMs) || (a._origIndex - b._origIndex));\n\n  if (segs[0].startMs > 0) segs[0].startMs = 0;\n  if (segs[0].startMs < 0) segs[0].startMs = 0;\n  if (segs[0].endMs < segs[0].startMs) segs[0].endMs = segs[0].startMs;\n\n  if (!Number.isFinite(totalDurMs) || totalDurMs == null || totalDurMs <= 0) {\n    let mx = 0;\n    for (const s of segs) mx = Math.max(mx, s.endMs);\n    totalDurMs = mx;\n  } else {\n    totalDurMs = Math.max(0, Math.round(totalDurMs));\n  }\n\n  for (let i = 0; i < segs.length - 1; i++) {\n    const cur = segs[i];\n    const next = segs[i + 1];\n\n    if (cur.startMs < 0) cur.startMs = 0;\n    if (next.startMs < 0) next.startMs = 0;\n\n    if (cur.endMs < cur.startMs) cur.endMs = cur.startMs;\n    if (next.endMs < next.startMs) next.endMs = next.startMs;\n\n    let desiredEnd = next.startMs - 1;\n    if (desiredEnd < cur.startMs) desiredEnd = cur.startMs;\n    cur.endMs = desiredEnd;\n\n    if (cur.endMs < cur.startMs) cur.endMs = cur.startMs;\n  }\n\n  const last = segs[segs.length - 1];\n  if (last.startMs < 0) last.startMs = 0;\n  if (last.endMs < last.startMs) last.endMs = last.startMs;\n\n  if (last.endMs < totalDurMs) last.endMs = totalDurMs;\n  if (last.endMs < last.startMs) last.endMs = last.startMs;\n\n  return { totalDurMs };\n}\n\n// --- Ð³Ñ€Ð°Ð½Ð¸Ñ†Ñ‹ Ð¿Ñ€ÐµÐ´Ð»Ð¾Ð¶ÐµÐ½Ð¸Ð¹ ---\nconst END_CHARS = new Set([\".\", \"!\", \"?\", \"â€¦\", \"ã€‚\", \"ï¼\", \"ï¼Ÿ\"]);\nconst CLOSERS = new Set(['\"', \"â€\", \"â€™\", \"'\", \")\", \"]\", \"}\", \"Â»\", \"â€º\", \"ï¼‰\", \"ã€‘\", \"ã€\", \"ã€\"]);\n\nconst ABBREV = new Set([\n  // EN\n  \"mr\",\"mrs\",\"ms\",\"mx\",\"dr\",\"prof\",\"sr\",\"jr\",\"st\",\"mt\",\"ft\",\"vs\",\n  \"etc\",\"eg\",\"ie\",\"fig\",\"eq\",\"ref\",\"refs\",\"no\",\"nos\",\"dept\",\"inc\",\"ltd\",\"corp\",\"co\",\"bros\",\n  \"est\",\"misc\",\"approx\",\"appt\",\"avg\",\"min\",\"max\",\"temp\",\"vol\",\"ch\",\"sec\",\"pp\",\"p\",\n  \"jan\",\"feb\",\"mar\",\"apr\",\"may\",\"jun\",\"jul\",\"aug\",\"sep\",\"sept\",\"oct\",\"nov\",\"dec\",\n  \"am\",\"pm\",\"a.m\",\"p.m\",\"u.s\",\"u.k\",\"e.u\",\"u.n\",\n\n  // RU\n  \"Ð³\",\"Ð³Ð³\",\"ÑƒÐ»\",\"Ð´\",\"ÐºÐ²\",\"ÑÑ‚Ñ€\",\"Ñ€Ð¸Ñ\",\"Ð¿Ñ€\",\"Ð¿Ñ€Ð¾ÑÐ¿\",\"Ð½Ð°Ð±\",\"Ð±ÑƒÐ»\",\"Ð¿ÐµÑ€\",\"Ð¿Ð»\",\"Ð¿Ð¾Ñ\",\"Ð¾Ð±Ð»\",\"Ñ€-Ð½\",\n  \"Ð¸Ð¼\",\"Ð°ÐºÐ°Ð´\",\"Ð´Ð¾Ñ†\",\"Ð¿Ñ€Ð¾Ñ„\",\"ÑÐ¼\",\"Ñ‚.Ð´\",\"Ñ‚.Ð¿\",\"Ð¸ Ñ‚.Ð´\",\"Ð¸ Ñ‚.Ð¿\",\"Ð´Ñ€\",\n  \"Ð¼Ð¸Ð½\",\"ÑÐµÐº\",\"Ñ‡\",\"Ð¼ÐµÑ\",\"Ð³Ð»\",\"ÑÑ‚\",\"Ð¿Ð¿\",\"Ð¿\",\"Ð¼Ð»Ð½\",\"Ð¼Ð»Ñ€Ð´\",\"Ñ‚Ñ‹Ñ\",\"Ñ€ÑƒÐ±\",\"ÐºÐ¾Ð¿\",\n\n  // PL\n  \"np\",\"itp\",\"itd\",\"m.in\",\"tzn\",\"tj\",\"wg\",\"ok\",\"nr\",\"ul\",\"al\",\"pl\",\"r\",\n  \"godz\",\"min\",\"sek\",\"str\",\"rys\",\"tab\",\"rozdz\",\"pkt\",\"ppkt\",\n  \"dr\",\"hab\",\"mgr\",\"inz\",\"prof\",\n\n  // CZ\n  \"napÅ™\",\"napr\",\"tzv\",\"atd\",\"apod\",\"tj\",\"tzn\",\"cl\",\"odst\",\"str\",\"obr\",\"tab\",\"kap\",\n  \"ing\",\"mgr\",\"mudr\",\"judr\",\"phdr\",\"bc\",\"dis\",\n\n  // SP (ES)\n  \"sr\",\"sra\",\"srta\",\"dr\",\"dra\",\"ud\",\"uds\",\"pag\",\"pags\",\"num\",\"nro\",\n  \"aprox\",\"etc\",\"av\",\"pto\",\"dpto\",\"art\",\"cap\",\"eeuu\",\n\n  // IT\n  \"sig\",\"sigg\",\"sigra\",\"sigre\",\"dr\",\"dott\",\"dssa\",\"ing\",\"avv\",\"prof\",\n  \"pag\",\"pagg\",\"num\",\"art\",\"cap\",\"ecc\",\"ca\",\"circa\",\"vle\",\"pza\",\"pzza\",\"cso\",\n\n  // FR\n  \"m\",\"mm\",\"mme\",\"mlle\",\"mlles\",\"dr\",\"pr\",\"etc\",\"env\",\"av\",\"bd\",\"st\",\"ste\",\n  \"no\",\"num\",\"art\",\"chap\",\"pag\",\"tel\",\"tva\",\n\n  // GE (DE)\n  \"hr\",\"fr\",\"dr\",\"prof\",\"bzw\",\"z.b\",\"zb\",\"bsp\",\"bspw\",\"usw\",\"vgl\",\"ca\",\n  \"d.h\",\"dh\",\"u.a\",\"ua\",\"u.Ã¤\",\"ue\",\"str\",\"nr\",\"s\",\"abb\",\"ggf\",\"dipl\",\"ing\",\"dipl-ing\",\n\n  // SW\n  \"bl.a\",\"bla\",\"t.ex\",\"tex\",\"dvs\",\"m.fl\",\"mfl\",\"m.m\",\"mm\",\"osv\",\n  \"ca\",\"nr\",\"sid\",\"kap\",\"fig\",\"kl\",\"dr\",\"prof\",\"ing\",\"fru\",\"herr\",\n\n  // HE\n  \"×“×¨\",\"×¤×¨×•×¤\",\"×’×‘\",\"×ž×¨\",\"×ž×¡\",\"×¢×ž\",\"×•×›×•\",\"×œ×“×•×’\",\"×¨×—\",\"×˜×œ\",\"×¡×¢\",\"×¤×¨×§\"\n]);\n\n\nfunction isLetterOrDigit(ch) {\n  return /[0-9A-Za-zÃ€-Ã–Ã˜-Ã¶Ã¸-Ã¿Ð-Ð¯Ð°-ÑÐÑ‘]/.test(ch);\n}\n\nfunction isAbbrevDot(text, dotPos) {\n  let i = dotPos - 1;\n  while (i >= 0 && text[i] === \" \") i--;\n\n  const end = i + 1;\n  while (i >= 0 && (isLetterOrDigit(text[i]) || text[i] === \"-\" )) i--;\n  const start = i + 1;\n\n  const word = text.slice(start, end).toLowerCase();\n  if (!word) return false;\n  if (word.length === 1) return true;\n  if (ABBREV.has(word)) return true;\n\n  const lookback = text.slice(Math.max(0, start - 4), dotPos + 1).toLowerCase();\n  if (lookback.includes(\".\") && lookback.length <= 6) return true;\n  return false;\n}\n\nfunction findSentenceBoundaries(text) {\n  const out = [];\n  const n = text.length;\n\n  for (let i = 0; i < n; i++) {\n    const ch = text[i];\n    if (!END_CHARS.has(ch)) continue;\n\n    let j = i;\n    while (j + 1 < n && END_CHARS.has(text[j + 1])) j++;\n\n    if (text[j] === \".\" && isAbbrevDot(text, j)) {\n      i = j;\n      continue;\n    }\n\n    let k = j + 1;\n    while (k < n && CLOSERS.has(text[k])) k++;\n\n    if (k === n || /\\s/.test(text[k])) out.push(k);\n    i = j;\n  }\n  return out;\n}\n\nfunction lastWhitespaceBefore(text, idx) {\n  for (let i = Math.min(idx, text.length - 1); i >= 0; i--) {\n    if (/\\s/.test(text[i])) return i;\n  }\n  return -1;\n}\n\nfunction firstWhitespaceAfter(text, idx) {\n  for (let i = Math.max(0, idx); i < text.length; i++) {\n    if (/\\s/.test(text[i])) return i;\n  }\n  return -1;\n}\n\n// ===============================\n// âœ… STRICT MIN/MAX REBALANCE PATCH\n// ===============================\n\nfunction splitDurStrict(totalDur, minMs, maxMs) {\n  const total = Math.max(0, Math.round(totalDur));\n  if (total === 0) return [];\n  if (total >= minMs && total <= maxMs) return [total];\n\n  // ÐœÐ¾Ð¶Ð½Ð¾ Ð»Ð¸ ÑÐ´ÐµÐ»Ð°Ñ‚ÑŒ Ð²ÑÐµ Ñ‡Ð°ÑÑ‚Ð¸ Ð² [min..max]\n  const nMin = Math.ceil(total / maxMs);\n  const nMax = Math.floor(total / minMs);\n\n  if (nMin <= nMax && nMin > 0) {\n    const n = nMin;\n    const base = Math.floor(total / n);\n    let rem = total - base * n;\n    const out = Array(n).fill(base);\n    for (let i = 0; i < n && rem > 0; i++, rem--) out[i]++;\n    return out;\n  }\n\n  // Ð˜Ð½Ð°Ñ‡Ðµ ÑÑ‚Ñ€Ð¾Ð³Ð¾ Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ Ð´Ð¸Ð°Ð¿Ð°Ð·Ð¾Ð½ Ð½ÐµÐ²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ â€” Ñ€ÐµÐ¶ÐµÐ¼ Ð¿Ð¾ max, Ñ…Ð²Ð¾ÑÑ‚ Ð¾ÑÑ‚Ð°Ð²Ð»ÑÐµÐ¼\n  const out = [];\n  let rem = total;\n  while (rem > maxMs) {\n    out.push(maxMs);\n    rem -= maxMs;\n  }\n  if (rem > 0) out.push(rem);\n  return out;\n}\n\nfunction nearestBoundary(boundaries, minPos, maxPos, idealPos) {\n  let best = -1;\n  let bestDist = Infinity;\n  for (const b of boundaries) {\n    if (b < minPos || b > maxPos) continue;\n    const d = Math.abs(b - idealPos);\n    if (d < bestDist) {\n      bestDist = d;\n      best = b;\n    }\n  }\n  return best;\n}\n\nfunction splitTextByDurations(text, durations) {\n  const t = cleanText(text);\n  if (!durations.length) return [];\n  if (!t) return durations.map(() => \"\");\n  if (durations.length === 1) return [t];\n\n  const out = [];\n  const boundaries = findSentenceBoundaries(t);\n  const totalDur = durations.reduce((a, b) => a + b, 0);\n\n  let start = 0;\n  let accDur = 0;\n\n  for (let i = 0; i < durations.length - 1; i++) {\n    accDur += durations[i];\n\n    let ideal = Math.round((accDur / Math.max(1, totalDur)) * t.length);\n    ideal = Math.max(start + 1, Math.min(t.length - 1, ideal));\n\n    const minPos = start + 1;\n    const maxPos = t.length - 1;\n\n    let cut = nearestBoundary(boundaries, minPos, maxPos, ideal);\n\n    if (cut < 0) {\n      const wsLeft = lastWhitespaceBefore(t, ideal);\n      const wsRight = firstWhitespaceAfter(t, ideal);\n\n      const leftOk = wsLeft >= minPos && wsLeft <= maxPos;\n      const rightOk = wsRight >= minPos && wsRight <= maxPos;\n\n      if (leftOk && rightOk) {\n        cut = (Math.abs(wsLeft - ideal) <= Math.abs(wsRight - ideal)) ? wsLeft + 1 : wsRight + 1;\n      } else if (leftOk) {\n        cut = wsLeft + 1;\n      } else if (rightOk) {\n        cut = wsRight + 1;\n      } else {\n        cut = ideal;\n      }\n    }\n\n    cut = Math.max(minPos, Math.min(maxPos, cut));\n    out.push(cleanText(t.slice(start, cut)));\n    start = cut;\n  }\n\n  out.push(cleanText(t.slice(start)));\n  return out;\n}\n\nfunction splitPartStrict(part, minMs, maxMs) {\n  const dur = Math.max(0, Math.round(part?.meta?.durMs || 0));\n  if (dur <= 0) return [];\n\n  const durs = splitDurStrict(dur, minMs, maxMs);\n  const texts = splitTextByDurations(part?.text || \"\", durs);\n\n  return durs.map((d, i) => ({\n    text: cleanText(texts[i] || \"\"),\n    meta: { durMs: d }\n  }));\n}\n\nfunction mergeParts(a, b) {\n  const ta = cleanText(a?.text || \"\");\n  const tb = cleanText(b?.text || \"\");\n  return {\n    text: cleanText((ta && tb) ? (ta + \" \" + tb) : (ta || tb)),\n    meta: {\n      durMs: Math.max(0, Math.round((a?.meta?.durMs || 0) + (b?.meta?.durMs || 0)))\n    }\n  };\n}\n\nfunction rebalancePartsStrict(inputParts, minMs, maxMs) {\n  let parts = (Array.isArray(inputParts) ? inputParts : [])\n    .map(p => ({\n      text: cleanText(p?.text || \"\"),\n      meta: { durMs: Math.max(0, Math.round(p?.meta?.durMs || 0)) }\n    }))\n    .filter(p => p.meta.durMs > 0);\n\n  if (!parts.length) return [];\n\n  for (let iter = 0; iter < 300; iter++) {\n    let changed = false;\n\n    // 1) Ð’ÑÐµ > max Ñ€ÐµÐ¶ÐµÐ¼ ÑÑ€Ð°Ð·Ñƒ\n    let next = [];\n    for (const p of parts) {\n      if (p.meta.durMs > maxMs) {\n        next.push(...splitPartStrict(p, minMs, maxMs));\n        changed = true;\n      } else {\n        next.push(p);\n      }\n    }\n    parts = next;\n\n    // 2) Ð˜Ñ‰ÐµÐ¼ Ð¿ÐµÑ€Ð²Ñ‹Ð¹ ÐºÑƒÑÐ¾Ðº < min\n    const shortIdx = parts.findIndex(p => p.meta.durMs < minMs);\n    if (shortIdx === -1) {\n      if (!changed) break;\n      continue;\n    }\n\n    if (parts.length === 1) break; // total < min â€” Ð½ÐµÐ¸Ð·Ð±ÐµÐ¶Ð½Ð¾\n\n    const leftIdx = shortIdx - 1;\n    const rightIdx = shortIdx + 1;\n    const cur = parts[shortIdx];\n\n    let pickLeft = false;\n    if (leftIdx < 0) {\n      pickLeft = false;\n    } else if (rightIdx >= parts.length) {\n      pickLeft = true;\n    } else {\n      const leftDur = parts[leftIdx].meta.durMs + cur.meta.durMs;\n      const rightDur = parts[rightIdx].meta.durMs + cur.meta.durMs;\n\n      const leftOver = Math.max(0, leftDur - maxMs);\n      const rightOver = Math.max(0, rightDur - maxMs);\n\n      if (leftOver !== rightOver) {\n        pickLeft = leftOver < rightOver;\n      } else {\n        const target = (minMs + maxMs) / 2;\n        pickLeft = Math.abs(leftDur - target) <= Math.abs(rightDur - target);\n      }\n    }\n\n    if (pickLeft) {\n      parts[leftIdx] = mergeParts(parts[leftIdx], cur);\n      parts.splice(shortIdx, 1);\n    } else {\n      parts[rightIdx] = mergeParts(cur, parts[rightIdx]);\n      parts.splice(shortIdx, 1);\n    }\n\n    changed = true;\n    if (!changed) break;\n  }\n\n  // Ð¤Ð¸Ð½Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð·Ð°Ñ‰Ð¸Ñ‚Ð½Ñ‹Ð¹ Ð¿Ñ€Ð¾Ñ…Ð¾Ð´ Ð¿Ð¾ max\n  const final = [];\n  for (const p of parts) {\n    if (p.meta.durMs <= maxMs) final.push(p);\n    else final.push(...splitPartStrict(p, minMs, maxMs));\n  }\n\n  return final;\n}\n\n// ===============================\n// ðŸš€ Core splitter (STRICT MAX + STRICT MIN/MAX PATCH)\n// ===============================\nfunction splitByMinMax(rawSegments, cfg) {\n  let { minMs, maxMs, softOverflowMs, totalDurMs } = cfg;\n\n  if (!Number.isFinite(minMs) || minMs <= 0) minMs = 2500;\n  if (!Number.isFinite(maxMs) || maxMs <= 0) maxMs = 4500;\n  if (minMs > maxMs) [minMs, maxMs] = [maxMs, minMs];\n\n  softOverflowMs = 0;\n  const hardMaxMs = maxMs;\n\n  // 1) Ð½Ð¾Ñ€Ð¼Ð°Ð»Ð¸Ð·ÑƒÐµÐ¼ ÑÐµÐ³Ð¼ÐµÐ½Ñ‚Ñ‹: text + startMs/endMs\n  const segs = (Array.isArray(rawSegments) ? rawSegments : [])\n    .map((seg, i) => {\n      const text = cleanText(seg?.[TEXT_KEY] ?? seg?.text ?? seg?.transcript ?? seg?.caption ?? \"\");\n      const se = normalizeStartEndMs({\n        start_ms: seg?.start_ms ?? pickFirst(seg, START_KEYS),\n        end_ms:   seg?.end_ms   ?? pickFirst(seg, END_KEYS),\n        start:    seg?.start    ?? pickFirst(seg, START_KEYS),\n        end:      seg?.end      ?? pickFirst(seg, END_KEYS),\n      });\n\n      return {\n        _origIndex: i,\n        text,\n        startMs: se.startMs,\n        endMs: se.endMs,\n      };\n    })\n    .filter(s => s.text);\n\n  // 2) Ð·Ð°Ð¿Ð¾Ð»Ð½ÑÐµÐ¼ Ð¿Ñ€Ð¾Ð±ÐµÐ»Ñ‹/ÑƒÐ±Ð¸Ñ€Ð°ÐµÐ¼ Ð¿ÐµÑ€ÐµÐºÑ€Ñ‹Ñ‚Ð¸Ñ Ð¿Ð¾ start/end\n  const filled = fillGapsInPlace(segs, totalDurMs);\n  totalDurMs = filled.totalDurMs;\n\n  // 3) Ð´Ð»Ñ ÑÐ±Ð¾Ñ€ÐºÐ¸ Ñ‡Ð°ÑÑ‚ÐµÐ¹ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ durMs = end-start (ÐºÐ°Ðº Ð² Ð¾Ñ€Ð¸Ð³Ð¸Ð½Ð°Ð»Ðµ)\n  const segments = segs.map(s => ({\n    text: s.text,\n    durMs: Math.max(0, s.endMs - s.startMs),\n  }));\n\n  // 4) Draft split: ÑÐ¾Ð±Ð»ÑŽÐ´Ð°ÐµÐ¼ max, Ð´Ð°Ð»ÑŒÑˆÐµ ÑÑ‚Ñ€Ð¾Ð³Ð¸Ð¹ Ñ€ÐµÐ±Ð°Ð»Ð°Ð½Ñ\n  const draftParts = [];\n\n  function pushPart(txt, dur) {\n    const t = cleanText(txt);\n    if (!t) return;\n\n    const d = Math.max(0, Math.round(dur));\n    draftParts.push({\n      text: t,\n      meta: { durMs: d },\n    });\n  }\n\n  let bufText = \"\";\n  let bufDurMs = 0;\n\n  function cutBufferStrict() {\n    const t = bufText;\n    const totalChars = t.length;\n\n    if (!totalChars || bufDurMs <= 0) {\n      pushPart(t, bufDurMs);\n      bufText = \"\";\n      bufDurMs = 0;\n      return true;\n    }\n\n    const denom = Math.max(1, bufDurMs);\n\n    let maxChar = Math.floor(totalChars * (maxMs / denom));\n    maxChar = Math.max(1, Math.min(totalChars - 1, maxChar));\n\n    let minChar = Math.floor(totalChars * (minMs / denom));\n    minChar = Math.max(0, Math.min(maxChar, minChar));\n\n    const boundaries = findSentenceBoundaries(t);\n    let cutIdx = -1;\n\n    // 1) Ð³Ñ€Ð°Ð½Ð¸Ñ†Ð° Ð² [minChar..maxChar]\n    for (let i = boundaries.length - 1; i >= 0; i--) {\n      const b = boundaries[i];\n      if (b >= minChar && b <= maxChar) { cutIdx = b; break; }\n    }\n\n    // 2) Ð¿Ð¾Ð·Ð´Ð½ÑÑ Ð³Ñ€Ð°Ð½Ð¸Ñ†Ð° <= maxChar\n    if (cutIdx < 0) {\n      for (let i = boundaries.length - 1; i >= 0; i--) {\n        const b = boundaries[i];\n        if (b <= maxChar) { cutIdx = b; break; }\n      }\n    }\n\n    // 3) Ð¿Ñ€Ð¾Ð±ÐµÐ» <= maxChar\n    if (cutIdx < 0) {\n      const ws = lastWhitespaceBefore(t, maxChar);\n      if (ws > 0) cutIdx = ws + 1;\n    }\n\n    // 4) Ð¸Ð½Ð°Ñ‡Ðµ â€” Ñ€Ð¾Ð²Ð½Ð¾ maxChar\n    if (cutIdx < 1 || cutIdx >= totalChars) cutIdx = maxChar;\n\n    const leftRaw = t.slice(0, cutIdx);\n    const rightRaw = t.slice(cutIdx);\n\n    const leftText = cleanText(leftRaw);\n    const rightText = cleanText(rightRaw);\n\n    const leftRatio = cutIdx / Math.max(1, totalChars);\n    let leftDur = Math.floor(bufDurMs * leftRatio);\n    if (leftDur > maxMs) leftDur = maxMs;\n    if (leftDur < 0) leftDur = 0;\n\n    const rightDur = Math.max(0, bufDurMs - leftDur);\n\n    pushPart(leftText, leftDur);\n    bufText = rightText;\n    bufDurMs = rightDur;\n\n    return true;\n  }\n\n  for (const seg of segments) {\n    bufText = bufText ? (bufText + \" \" + seg.text) : seg.text;\n    bufDurMs += seg.durMs;\n\n    while (bufText && bufDurMs > hardMaxMs) {\n      cutBufferStrict();\n      if (bufDurMs < minMs) break;\n    }\n  }\n\n  if (bufText) {\n    while (bufText && bufDurMs > hardMaxMs) {\n      cutBufferStrict();\n      if (bufDurMs < minMs) break;\n    }\n    if (bufText) pushPart(bufText, bufDurMs);\n  }\n\n  // 5) ÐŸÐ°Ñ‚Ñ‡: Ñ€ÐµÐ±Ð°Ð»Ð°Ð½ÑÐ¸Ð¼, Ñ‡Ñ‚Ð¾Ð±Ñ‹ durMs Ð±Ñ‹Ð»Ð¸ Ð² [min..max], ÐºÐ¾Ð³Ð´Ð° ÑÑ‚Ð¾ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾\n  const strictParts = rebalancePartsStrict(draftParts, minMs, maxMs);\n\n  // 6) Ð’Ð¾ÑÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ð’Ð¡Ð• Ð¿Ð¾Ð»Ñ ÐºÐ°Ðº Ð² Ð¾Ñ€Ð¸Ð³Ð¸Ð½Ð°Ð»Ðµ\n  const parts = strictParts.map((p, i) => {\n    const t = cleanText(p.text);\n    return {\n      partIndex: i,\n      text: t,\n      meta: {\n        durMs: Math.max(0, Math.round(p.meta.durMs || 0)),\n        charCount: t.length,\n      },\n    };\n  });\n\n  return {\n    parts,\n    minMs,\n    maxMs,\n    softOverflowMs,\n    hardMaxMs,\n    totalDurMs,\n  };\n}\n\n// ===============================\n// âœ… Run\n// ===============================\nconst result = splitByMinMax(RAW_SEGMENTS, {\n  minMs: EACH_IMAGE_MIN_SCREEN_TIME_MS,\n  maxMs: EACH_IMAGE_MAX_SCREEN_TIME_MS,\n  softOverflowMs: SOFT_OVERFLOW_MS,\n  totalDurMs: TOTAL_DUR_MS,\n});\n\nreturn [\n  {\n    json: {\n      parts: result.parts,\n      totalDurMs: result.totalDurMs,\n      eachImageMinScreenTimeMs: result.minMs,\n      eachImageMaxScreenTimeMs: result.maxMs,\n      hardMaxMs: result.hardMaxMs,\n    }\n  }\n];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2496,
        224
      ],
      "id": "171cc174-f0a7-4b03-b154-b484426aa0e3",
      "name": "Define Visuals Duration(normalized)"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "jN0HNmDZY1IKD2vM-oIO3",
          "mode": "list",
          "cachedResultUrl": "/workflow/jN0HNmDZY1IKD2vM-oIO3",
          "cachedResultName": "Text file works"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "filePath": "={{ $('Start').first().json.channelsFolderPath }}/{{ $('Start').first().json.channelName }}/VIDEOS/{{ $('Start').first().json.videoFolderName }}/CLIPS/videoClipPrompts/*.txt",
            "fileAction": "read"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "filePath",
              "displayName": "filePath",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "fileAction",
              "displayName": "fileAction",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "text",
              "displayName": "text",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        2704,
        224
      ],
      "id": "24b41906-4574-41da-89a5-877eda511a9b",
      "name": "get prompts, filenames, indexes"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "o5B3Nkoco1rF2d1h",
          "mode": "list",
          "cachedResultUrl": "/workflow/o5B3Nkoco1rF2d1h",
          "cachedResultName": "runpod works"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "channelsFolderPath": "={{ $('Start').first().json.channelsFolderPath }}",
            "channelName": "={{ $('Start').first().json.channelName }}",
            "videoFolderName": "={{ $('Start').first().json.videoFolderName }}",
            "method": "sendComfyUiGenerationRequest",
            "runpodUseVolume": "={{ false }}",
            "runpodTemplateId": "={{ $('get pod parameters').last().json.runpodVideoGenTemplateId }}",
            "runpodVolumeId": "={{ \"\" }}",
            "runpodGpuList": "={{ [] }}",
            "runpodCountryCodes": "={{ [] }}",
            "runpodContainerDiskInGb": "={{0}}",
            "runpodVolumeInGb": "={{0}}",
            "comfyUiRequest": "={{ $json.request }}",
            "index": "={{ $('get prompts, filenames, indexes').item.json.index }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "channelsFolderPath",
              "displayName": "channelsFolderPath",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "channelName",
              "displayName": "channelName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "videoFolderName",
              "displayName": "videoFolderName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "index",
              "displayName": "index",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "number",
              "removed": false
            },
            {
              "id": "method",
              "displayName": "method",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "comfyUiRequest",
              "displayName": "comfyUiRequest",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "object",
              "removed": false
            },
            {
              "id": "runpodTemplateId",
              "displayName": "runpodTemplateId",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "runpodUseVolume",
              "displayName": "runpodUseVolume",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "boolean",
              "removed": false
            },
            {
              "id": "runpodVolumeId",
              "displayName": "runpodVolumeId",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "runpodContainerDiskInGb",
              "displayName": "runpodContainerDiskInGb",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "number",
              "removed": false
            },
            {
              "id": "runpodVolumeInGb",
              "displayName": "runpodVolumeInGb",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "number",
              "removed": false
            },
            {
              "id": "runpodGpuList",
              "displayName": "runpodGpuList",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "array",
              "removed": false
            },
            {
              "id": "runpodCountryCodes",
              "displayName": "runpodCountryCodes",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "array",
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "mode": "each",
        "options": {
          "waitForSubWorkflow": false
        }
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        4480,
        -32
      ],
      "id": "55b8bdc9-feef-4f37-baaf-4788c3808c5a",
      "name": "send runpod gen request"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "b838a0db-de7b-412b-bf0a-98d59eec900c",
              "name": "positivePrompt",
              "value": "={{ $json.text.replaceAll('\"',\"'\") }}",
              "type": "string"
            },
            {
              "id": "c855e136-51a3-4efb-a159-d4c616716aca",
              "name": "negativePrompt",
              "value": "={{ $json.hasField('negativePrompt') ? $json.negativePrompt : \"blurry, out of focus, overexposed, underexposed, low contrast, washed out colors, excessive noise, grainy texture, poor lighting, flickering, motion blur, distorted proportions, unnatural skin tones, deformed facial features, asymmetrical face, missing facial features, extra limbs, disfigured hands, wrong hand count, artifacts around text, unreadable text on shirt or hat, incorrect lettering on cap (â€œPNTRâ€), incorrect t-shirt slogan (â€œJUST DO ITâ€), missing microphone, misplaced microphone, inconsistent perspective, camera shake, incorrect depth of field, background too sharp, background clutter, distracting reflections, harsh shadows, inconsistent lighting direction, color banding, cartoonish rendering, 3D CGI look, unrealistic materials, uncanny valley effect, incorrect ethnicity, wrong gender, exaggerated expressions, smiling, laughing, exaggerated sadness, wrong gaze direction, eyes looking at camera, mismatched lip sync, silent or muted audio, distorted voice, robotic voice, echo, background noise, off-sync audio, missing sniff sounds, incorrect dialogue, added dialogue, repetitive speech, jittery movement, awkward pauses, incorrect timing, unnatural transitions, inconsistent framing, tilted camera, missing door or shelves, missing shallow depth of field, flat lighting, inconsistent tone, cinematic oversaturation, stylized filters, or AI artifacts.\" }}",
              "type": "string"
            },
            {
              "id": "c0923bce-18a2-4d29-8631-729f397e2637",
              "name": "clipWidth",
              "value": "={{ $('get clip gen params').first().json.clipWidth }}",
              "type": "number"
            },
            {
              "id": "1820dabd-6ad3-428d-8bb0-53d7fc743e39",
              "name": "clipHeight",
              "value": "={{ $('get clip gen params').first().json.clipHeight }}",
              "type": "number"
            },
            {
              "id": "34d4782e-6e9a-441f-9ddf-64b6d23c1e7c",
              "name": "clipFramesCount",
              "value": "={{ (()=>{\nreturn ($('Define Visuals Duration(normalized)').item.json.parts[$json.index].meta.durMs/1000*$('get clip gen params').item.json.clipFps).ceil()\n})() }}",
              "type": "string"
            },
            {
              "id": "6d9e4cc2-4f9f-438c-a6c5-3065f8d80dc7",
              "name": "clipFps",
              "value": "={{ $('get clip gen params').item.json.clipFps }}",
              "type": "number"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        2912,
        224
      ],
      "id": "8e856214-5c75-4025-b852-16cc251e95c2",
      "name": "set clip params"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "Or9eJruDbYcgW7rm",
          "mode": "list",
          "cachedResultUrl": "/workflow/Or9eJruDbYcgW7rm",
          "cachedResultName": "runpod generations manager"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "channelsFolderPath": "={{ $('Start').first().json.channelsFolderPath }}",
            "channelName": "={{ $('Start').first().json.channelName }}",
            "videoFolderName": "={{ $('Start').first().json.videoFolderName }}",
            "comfyUiRequest": "={{ $json.request }}",
            "runpodTemplateId": "={{ $('get pod parameters').last().json.runpodVideoGenTemplateId }}",
            "index": "={{ $('get prompts, filenames, indexes').item.json.index }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "channelsFolderPath",
              "displayName": "channelsFolderPath",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "channelName",
              "displayName": "channelName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "videoFolderName",
              "displayName": "videoFolderName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "comfyUiRequest",
              "displayName": "comfyUiRequest",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "object",
              "removed": false
            },
            {
              "id": "runpodTemplateId",
              "displayName": "runpodTemplateId",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "index",
              "displayName": "index",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "number",
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "mode": "each",
        "options": {
          "waitForSubWorkflow": true
        }
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        4480,
        96
      ],
      "id": "e8725072-55e5-4e9b-a892-e932642381fe",
      "name": "runpod generations manager"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.filesReady }}",
                    "rightValue": "",
                    "operator": {
                      "type": "boolean",
                      "operation": "true",
                      "singleValue": true
                    },
                    "id": "5359e40c-d5cf-4c2d-8d58-7b7cc779cafb"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "ready"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "21d22fd7-1078-49ca-8e64-4c69b27f09d5",
                    "leftValue": "={{ !$json.filesReady }}",
                    "rightValue": "",
                    "operator": {
                      "type": "boolean",
                      "operation": "true",
                      "singleValue": true
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "not ready"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        4688,
        224
      ],
      "id": "73000a8a-2b19-45c4-9020-1a27b0d479f7",
      "name": "Switch"
    },
    {
      "parameters": {
        "amount": 60
      },
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        4784,
        320
      ],
      "id": "3194b6dc-685d-4179-bf9d-9a3af1c06857",
      "name": "Wait",
      "webhookId": "e787279e-e456-4ca0-b755-91b00d6cc040"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "N2bXusYBgofvRBlH",
          "mode": "list",
          "cachedResultUrl": "/workflow/N2bXusYBgofvRBlH",
          "cachedResultName": "check files quantity in directory"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "expectedFilesCount": "={{ $('Define Visuals Duration(normalized)').item.json.parts.length }}",
            "directoryPath": "={{ $('Start').item.json.channelsFolderPath }}/{{ $('Start').item.json.channelName }}/VIDEOS/{{ $('Start').item.json.videoFolderName }}/CLIPS/videoClips",
            "fileExtentionToSearch": ".mp4"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "directoryPath",
              "displayName": "directoryPath",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "fileExtentionToSearch",
              "displayName": "fileExtentionToSearch",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "fileNameToSearch",
              "displayName": "fileNameToSearch",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "expectedFilesCount",
              "displayName": "expectedFilesCount",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "number",
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        4480,
        224
      ],
      "id": "cb85b561-4d4e-4e6e-bc0f-98a27ab2aec6",
      "name": "check ready clips files"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "qwG1pltFOQqqJLyh",
          "mode": "list",
          "cachedResultUrl": "/workflow/qwG1pltFOQqqJLyh",
          "cachedResultName": "JSON File Works"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "filePath": "={{ $('Start').first().json.channelsFolderPath }}/{{ $('Start').first().json.channelName }}/VIDEOS/{{ $('Start').first().json.videoFolderName }}/videoStatus.json",
            "fileAction": "write",
            "keysToReturn": "={{ [] }}",
            "keysToWrite": "={{ {\n\"clipsReady\":true\n} }}",
            "keysToDelete": "={{ [] }}"
          },
          "matchingColumns": [
            "channelsFolderPath_firstItem",
            "channelName_firstItem"
          ],
          "schema": [
            {
              "id": "filePath",
              "displayName": "filePath",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "fileAction",
              "displayName": "fileAction",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "keysToReturn",
              "displayName": "keysToReturn",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "array",
              "removed": false
            },
            {
              "id": "keysToWrite",
              "displayName": "keysToWrite",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "object",
              "removed": false
            },
            {
              "id": "keysToDelete",
              "displayName": "keysToDelete",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "array",
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.2,
      "position": [
        4960,
        224
      ],
      "name": "set clips ready",
      "id": "a325f998-ae71-4c29-adbc-a2e18281bed8"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "o5B3Nkoco1rF2d1h",
          "mode": "list",
          "cachedResultUrl": "/workflow/o5B3Nkoco1rF2d1h",
          "cachedResultName": "runpod works"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "channelsFolderPath": "={{ $('Start').first().json.channelsFolderPath }}",
            "channelName": "={{ $('Start').first().json.channelName }}",
            "videoFolderName": "={{ $('Start').first().json.videoFolderName }}",
            "method": "terminatePod",
            "runpodUseVolume": "={{ false }}",
            "runpodTemplateId": "={{ $('get pod parameters').last().json.runpodVideoGenTemplateId }}",
            "runpodVolumeId": "={{ \"\" }}",
            "runpodGpuList": "={{ [] }}",
            "runpodCountryCodes": "={{ [] }}",
            "runpodContainerDiskInGb": "={{0}}",
            "runpodVolumeInGb": "={{0}}",
            "comfyUiRequest": "={{ {} }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "channelsFolderPath",
              "displayName": "channelsFolderPath",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "channelName",
              "displayName": "channelName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "videoFolderName",
              "displayName": "videoFolderName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "method",
              "displayName": "method",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "comfyUiRequest",
              "displayName": "comfyUiRequest",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "object",
              "removed": false
            },
            {
              "id": "runpodTemplateId",
              "displayName": "runpodTemplateId",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "runpodUseVolume",
              "displayName": "runpodUseVolume",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "boolean",
              "removed": false
            },
            {
              "id": "runpodVolumeId",
              "displayName": "runpodVolumeId",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "runpodContainerDiskInGb",
              "displayName": "runpodContainerDiskInGb",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "number",
              "removed": false
            },
            {
              "id": "runpodVolumeInGb",
              "displayName": "runpodVolumeInGb",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "number",
              "removed": false
            },
            {
              "id": "runpodGpuList",
              "displayName": "runpodGpuList",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "array",
              "removed": false
            },
            {
              "id": "runpodCountryCodes",
              "displayName": "runpodCountryCodes",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "array",
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "mode": "each",
        "options": {
          "waitForSubWorkflow": true
        }
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        5168,
        224
      ],
      "id": "13e34d7e-a158-4dbb-ac31-ac0e267c873e",
      "name": "send terminate pod gen request"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "N2bXusYBgofvRBlH",
          "mode": "list",
          "cachedResultUrl": "/workflow/N2bXusYBgofvRBlH",
          "cachedResultName": "check files quantity in directory"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "directoryPath": "={{ $('Start').item.json.channelsFolderPath }}/{{ $('Start').item.json.channelName }}/VIDEOS/{{ $('Start').item.json.videoFolderName }}/CLIPS/videoClips",
            "fileExtentionToSearch": ".mp4",
            "expectedFilesCount": -1
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "directoryPath",
              "displayName": "directoryPath",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "fileExtentionToSearch",
              "displayName": "fileExtentionToSearch",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "fileNameToSearch",
              "displayName": "fileNameToSearch",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "expectedFilesCount",
              "displayName": "expectedFilesCount",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "number",
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        1760,
        224
      ],
      "id": "60ed4cc5-f6a8-4b3d-93c0-32a7167448d9",
      "name": "check ready clips files1"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "fa71635d-0a12-4d7a-ad54-02a94e261aab",
              "leftValue": "={{!$('check ready clips files1').last().json.existingFilesNames.map(item => item.slice(0,-4)).includes($('get prompts, filenames, indexes').item.json.fileName.slice(0,-4)) }}",
              "rightValue": "",
              "operator": {
                "type": "boolean",
                "operation": "true",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.filter",
      "typeVersion": 2.3,
      "position": [
        3104,
        224
      ],
      "id": "c77b171b-a422-4637-a9cd-b46cfe7841f7",
      "name": "filter done parts"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.limit",
      "typeVersion": 1,
      "position": [
        3536,
        224
      ],
      "id": "028cb5c7-16de-4959-8561-32b6a9b84061",
      "name": "Limit",
      "disabled": true
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.limit",
      "typeVersion": 1,
      "position": [
        4688,
        96
      ],
      "id": "144375a7-7809-4363-a6db-0d0f14b199c6",
      "name": "Limit1"
    }
  ],
  "connections": {
    "Start": {
      "main": [
        [
          {
            "node": "get clips gen type",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get clips gen type": {
      "main": [
        [
          {
            "node": "Switch Clips Gen Type",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch Clips Gen Type": {
      "main": [
        [
          {
            "node": "Switch by clipGenerationService",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch by clipGenerationService": {
      "main": [
        [
          {
            "node": "get pod parameters",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get pod parameters": {
      "main": [
        [
          {
            "node": "start runpod",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "start runpod": {
      "main": [
        [
          {
            "node": "if pod ready",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "if pod ready": {
      "main": [
        [
          {
            "node": "check ready clips files1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch by Template Id": {
      "main": [
        [
          {
            "node": "Limit",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get text gen service and eachVisualScreenTime": {
      "main": [
        [
          {
            "node": "get start/end ms of each scentance from transcript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get start/end ms of each scentance from transcript": {
      "main": [
        [
          {
            "node": "Define Visuals Duration(normalized)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get clip gen params": {
      "main": [
        [
          {
            "node": "get text gen service and eachVisualScreenTime",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Define Visuals Duration(normalized)": {
      "main": [
        [
          {
            "node": "get prompts, filenames, indexes",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get prompts, filenames, indexes": {
      "main": [
        [
          {
            "node": "set clip params",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "form edk2i1wn89 request": {
      "main": [
        [
          {
            "node": "send runpod gen request",
            "type": "main",
            "index": 0
          },
          {
            "node": "check ready clips files",
            "type": "main",
            "index": 0
          },
          {
            "node": "runpod generations manager",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "set clip params": {
      "main": [
        [
          {
            "node": "filter done parts",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch": {
      "main": [
        [
          {
            "node": "set clips ready",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Wait",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait": {
      "main": [
        [
          {
            "node": "check ready clips files",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "check ready clips files": {
      "main": [
        [
          {
            "node": "Switch",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "set clips ready": {
      "main": [
        [
          {
            "node": "send terminate pod gen request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "check ready clips files1": {
      "main": [
        [
          {
            "node": "get clip gen params",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "filter done parts": {
      "main": [
        [
          {
            "node": "Switch by Template Id",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Limit": {
      "main": [
        [
          {
            "node": "form edk2i1wn89 request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "runpod generations manager": {
      "main": [
        [
          {
            "node": "Limit1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Limit1": {
      "main": [
        [
          {
            "node": "send terminate pod gen request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "meta": null,
  "pinData": {
    "Start": [
      {
        "json": {
          "channelsFolderPath": "C:/Users/V/Desktop/Channels",
          "channelName": "WgladWPrzeszlosc",
          "videoFolderName": "2026-02-08_VySCN"
        },
        "pairedItem": {
          "item": 0
        }
      }
    ]
  },
  "versionId": "3e64e6ad-8499-4403-8aac-1220d45838b9",
  "activeVersionId": "3e64e6ad-8499-4403-8aac-1220d45838b9",
  "versionCounter": 825,
  "triggerCount": 0,
  "tags": [],
  "shared": [
    {
      "updatedAt": "2026-02-05T15:40:02.771Z",
      "createdAt": "2026-02-05T15:40:02.771Z",
      "role": "workflow:owner",
      "workflowId": "l0p4y5gFr4cklXjY",
      "projectId": "jyxvHYm2zz0wpNIZ",
      "project": {
        "updatedAt": "2026-02-03T20:00:07.843Z",
        "createdAt": "2026-02-03T19:58:35.642Z",
        "id": "jyxvHYm2zz0wpNIZ",
        "name": "Vladislav Kostromin <bad4rr@gmail.com>",
        "type": "personal",
        "icon": null,
        "description": null,
        "creatorId": "791bcae9-1f6e-48f2-9f28-d86a2c32ea27"
      }
    }
  ]
}